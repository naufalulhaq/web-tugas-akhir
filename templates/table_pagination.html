{% extends "layout.html" %}

{% block title %}Table Data{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
      <div class="card">
        <div class="card-body">
          <h3 class="card-title">Dataset Table</h3>
          <!-- <p class="card-description">
            Add class <code>.table</code>
          </p> -->
          <div class="table-responsive">
            <table class="table">
              <tr>
                <thead>
                  {% for col in data[0].keys() %}
                      <th>
                        <a href="?sort_by={{ col }}&direction=asc&page=1">{{ col }} ↑</a>
                        <a href="?sort_by={{ col }}&direction=desc&page=1">{{ col }} ↓</a>
                      </th>
                  {% endfor %}
                </thead>
              </tr>
              {% for row in data %}
                  <tr>
                      {% for val in row.values() %}
                          <td>{{ val }}</td>
                      {% endfor %}
                  </tr>
              {% endfor %}
          </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <nav aria-label="Page navigation example">
    <ul class="pagination">
      <li class="page-item {% if page <= 1 %} disabled {% endif %}">
        <a class="page-link" href="?page={{ page - 1 }}" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      {% for i in range(1, total_pages + 1) %}
      <li class="page-item {% if i == page %} active {% endif %}">
        <a class="page-link" href="?page={{ i }}">{{ i }}</a>
      </li>
      {% endfor %}
      <li class="page-item {% if page >= total_pages %} disabled {% endif %}">
        <a class="page-link" href="?page={{ page + 1 }}" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    </ul>
  </nav>
{% endblock %}
